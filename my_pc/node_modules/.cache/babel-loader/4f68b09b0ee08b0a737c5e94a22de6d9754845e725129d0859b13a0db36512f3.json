{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\\\u041D\\u043E\\u0443\\u043D\\u0435\\u0439\\u043C\\\\PY\\\\my_pc\\\\src\\\\components\\\\Shop.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { API_KEY, API_URL } from '../config';\nimport { GoodsList } from './GoodsList';\nimport { Cart } from './Cart';\nimport { BasketList } from './BasketList';\nimport { Alert } from './Alert';\nimport { Preloader } from './Preloader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Shop() {\n  _s();\n  const [products, setGoods] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [order, setOrder] = useState([]);\n  const [isBasketShow, setBasketShow] = useState(false);\n  const [alertName, setAlertName] = useState('');\n  const addToBasket = item => {\n    const itemIndex = order.findIndex(orderItem => orderItem.id === item.id);\n    if (itemIndex < 0) {\n      const newItem = {\n        ...item,\n        quantity: 1\n      };\n      setOrder([...order, newItem]);\n    } else {\n      const newOrder = order.map((orderItem, index) => {\n        if (index === itemIndex) {\n          return {\n            ...orderItem,\n            quantity: orderItem.quantity + 1\n          };\n        } else {\n          return orderItem;\n        }\n      });\n      setOrder(newOrder);\n    }\n    setAlertName(item.name);\n  };\n  const removeFromBasket = itemId => {\n    const newOrder = order.filter(el => el.id !== itemId);\n    setOrder(newOrder);\n  };\n  const incQuantity = itemId => {\n    const newOrder = order.map(el => {\n      if (el.id === itemId) {\n        const newQuantity = el.quantity + 1;\n        return {\n          ...el,\n          quantity: newQuantity\n        };\n      } else {\n        return el;\n      }\n    });\n    setOrder(newOrder);\n  };\n  const decQuantity = itemId => {\n    const newOrder = order.map(el => {\n      if (el.id === itemId) {\n        const newQuantity = el.quantity - 1;\n        return {\n          ...el,\n          quantity: newQuantity >= 0 ? newQuantity : 0\n        };\n      } else {\n        return el;\n      }\n    });\n    setOrder(newOrder);\n  };\n  const handleBasketShow = () => {\n    setBasketShow(!isBasketShow);\n  };\n  useEffect(function getGoods() {\n    fetch(API_URL, {\n      headers: {\n        Authorization: API_KEY\n      }\n    }).then(res => res.json()).then(data => {\n      data.featured && setGoods(data.featured);\n      setLoading(false);\n    });\n  }, []);\n  const closeAlert = () => {\n    setAlertName('');\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"container content\",\n    children: [/*#__PURE__*/_jsxDEV(Cart, {\n      quantity: order.length,\n      handleBasketShow: handleBasketShow\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Preloader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 18\n    }, this) : /*#__PURE__*/_jsxDEV(GoodsList, {\n      goods: goods,\n      addToBasket: addToBasket\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 34\n    }, this), isBasketShow && /*#__PURE__*/_jsxDEV(BasketList, {\n      order: order,\n      handleBasketShow: handleBasketShow,\n      removeFromBasket: removeFromBasket,\n      incQuantity: incQuantity,\n      decQuantity: decQuantity\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this), alertName && /*#__PURE__*/_jsxDEV(Alert, {\n      name: alertName,\n      closeAlert: closeAlert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n}\n_s(Shop, \"0S3X9DpaA4CGeyjj0M3XEYvAMDw=\");\n_c = Shop;\nexport { Shop };\nvar _c;\n$RefreshReg$(_c, \"Shop\");","map":{"version":3,"names":["useState","useEffect","API_KEY","API_URL","GoodsList","Cart","BasketList","Alert","Preloader","jsxDEV","_jsxDEV","Shop","_s","products","setGoods","loading","setLoading","order","setOrder","isBasketShow","setBasketShow","alertName","setAlertName","addToBasket","item","itemIndex","findIndex","orderItem","id","newItem","quantity","newOrder","map","index","name","removeFromBasket","itemId","filter","el","incQuantity","newQuantity","decQuantity","handleBasketShow","getGoods","fetch","headers","Authorization","then","res","json","data","featured","closeAlert","className","children","length","fileName","_jsxFileName","lineNumber","columnNumber","goods","_c","$RefreshReg$"],"sources":["C:/Users/Asus/Desktop/Ноунейм/PY/my_pc/src/components/Shop.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { API_KEY, API_URL } from '../config';\r\n\r\nimport { GoodsList } from './GoodsList';\r\nimport { Cart } from './Cart';\r\nimport { BasketList } from './BasketList';\r\nimport { Alert } from './Alert';\r\nimport { Preloader } from './Preloader';\r\n\r\nfunction Shop() {\r\n  const [products, setGoods] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [order, setOrder] = useState([]);\r\n  const [isBasketShow, setBasketShow] = useState(false);\r\n  const [alertName, setAlertName] = useState('');\r\n\r\n  const addToBasket = (item) => {\r\n    const itemIndex = order.findIndex((orderItem) => orderItem.id === item.id);\r\n\r\n    if (itemIndex < 0) {\r\n      const newItem = {\r\n        ...item,\r\n        quantity: 1,\r\n      };\r\n      setOrder([...order, newItem]);\r\n    } else {\r\n      const newOrder = order.map((orderItem, index) => {\r\n        if (index === itemIndex) {\r\n          return {\r\n            ...orderItem,\r\n            quantity: orderItem.quantity + 1,\r\n          };\r\n        } else {\r\n          return orderItem;\r\n        }\r\n      });\r\n\r\n      setOrder(newOrder);\r\n    }\r\n\r\n    setAlertName(item.name);\r\n  };\r\n\r\n  const removeFromBasket = (itemId) => {\r\n    const newOrder = order.filter((el) => el.id !== itemId);\r\n    setOrder(newOrder);\r\n  };\r\n\r\n  const incQuantity = (itemId) => {\r\n    const newOrder = order.map((el) => {\r\n      if (el.id === itemId) {\r\n        const newQuantity = el.quantity + 1;\r\n        return {\r\n          ...el,\r\n          quantity: newQuantity,\r\n        };\r\n      } else {\r\n        return el;\r\n      }\r\n    });\r\n    setOrder(newOrder);\r\n  };\r\n\r\n  const decQuantity = (itemId) => {\r\n    const newOrder = order.map((el) => {\r\n      if (el.id === itemId) {\r\n        const newQuantity = el.quantity - 1;\r\n        return {\r\n          ...el,\r\n          quantity: newQuantity >= 0 ? newQuantity : 0,\r\n        };\r\n      } else {\r\n        return el;\r\n      }\r\n    });\r\n    setOrder(newOrder);\r\n  };\r\n\r\n  const handleBasketShow = () => {\r\n    setBasketShow(!isBasketShow);\r\n  };\r\n\r\n  useEffect(function getGoods() {\r\n    fetch(API_URL, {\r\n      headers: {\r\n        Authorization: API_KEY,\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        data.featured && setGoods(data.featured);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const closeAlert = () => {\r\n    setAlertName('');\r\n  };\r\n\r\n  return (\r\n    <main className=\"container content\">\r\n      <Cart quantity={order.length} handleBasketShow={handleBasketShow} />\r\n      {loading ? <Preloader /> : <GoodsList goods={goods} addToBasket={addToBasket} />}\r\n      {isBasketShow && (\r\n        <BasketList\r\n          order={order}\r\n          handleBasketShow={handleBasketShow}\r\n          removeFromBasket={removeFromBasket}\r\n          incQuantity={incQuantity}\r\n          decQuantity={decQuantity}\r\n        />\r\n      )}\r\n      {alertName && <Alert name={alertName} closeAlert={closeAlert} />}\r\n    </main>\r\n  );\r\n}\r\n\r\nexport { Shop };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}